<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Dashboard ‚Äì Risco x Seguran√ßa</title>

<!-- Plotly -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<!-- TradingView -->
<script src="https://s3.tradingview.com/external-embedding/embed-widget-tickers.js"></script>

<style>
body{margin:0;font-family:Arial;background:#f4f6f8}

/* TOPO */
#topo{position:fixed;top:0;left:0;width:100%;height:28px;z-index:1000;background:#fff;border-bottom:1px solid #ccc}
#conteudo{margin-top:36px;padding:10px}

/* GR√ÅFICO */
#grafico{width:95%;max-width:1200px;height:420px;margin:20px auto;background:#fff;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,.15)}

/* TABELAS */
table{width:95%;max-width:1200px;margin:20px auto;border-collapse:collapse;background:#fff}
th,td{padding:8px;border:1px solid #ddd;text-align:center}
th{background:#2563eb;color:#fff}
.risco{color:green;font-weight:bold}
.seguro{color:red;font-weight:bold}
</style>
</head>

<body>

<!-- PAINEL COTA√á√ïES -->
<div id="topo">
<script>
new TradingView.widget({
  symbols:[
    {proName:"FOREXCOM:DX1!",title:"DXY"},
    {proName:"INDEX:SPX",title:"S&P 500"},
    {proName:"INDEX:DJI",title:"Dow Jones"},
    {proName:"ICE:BRN1!",title:"Brent"},
    {proName:"NYMEX:CL1!",title:"WTI"}
  ],
  colorTheme:"light",
  isTransparent:true,
  showSymbolLogo:false,
  locale:"pt",
  width:"100%",
  height:28
});
</script>
</div>

<div id="conteudo">

<h2 style="text-align:center">üìà Risco x Seguran√ßa (Tempo Real)</h2>

<div id="grafico"></div>

<!-- TABELA RISCO -->
<table>
<thead><tr><th>Ativos de Risco</th><th>Valor</th><th>Varia√ß√£o</th></tr></thead>
<tbody id="tbRisco"></tbody>
</table>

<!-- TABELA SEGURAN√áA -->
<table>
<thead><tr><th>Ativos de Seguran√ßa</th><th>Valor</th><th>Varia√ß√£o</th></tr></thead>
<tbody id="tbSeguro"></tbody>
</table>

</div>

<script>
/* ===== DADOS ===== */
let datas=[], risco=[], seguro=[];
let baseRisco=100, baseSeguro=100;

const ativosRisco=["S&P 500","Dow Jones","Petr√≥leo","Emergentes","Semicondutores"];
const ativosSeguro=["DXY","VIX","USD","Treasuries","Iene"];

/* ===== GR√ÅFICO ===== */
function plotar(){
  Plotly.react("grafico",[
    {x:datas,y:risco,name:"Risco",mode:"lines",line:{color:"green"}},
    {x:datas,y:seguro,name:"Seguran√ßa",mode:"lines",line:{color:"red"}}
  ],{
    margin:{t:40},
    xaxis:{title:"Hor√°rio"},
    yaxis:{title:"For√ßa Relativa"},
    legend:{orientation:"h"}
  });
}

/* ===== ATUALIZA ===== */
function atualizar(){
  const agora=new Date();
  baseRisco+= (Math.random()-0.5)*2;
  baseSeguro+= (Math.random()-0.5)*1;

  datas.push(agora.toLocaleTimeString("pt-BR"));
  risco.push(+baseRisco.toFixed(2));
  seguro.push(+baseSeguro.toFixed(2));

  if(datas.length>1440){datas.shift();risco.shift();seguro.shift();}

  plotar();
  atualizarTabelas();
}

/* ===== TABELAS ===== */
function atualizarTabelas(){
  const r=document.getElementById("tbRisco");
  const s=document.getElementById("tbSeguro");
  r.innerHTML=""; s.innerHTML="";

  ativosRisco.forEach(a=>{
    r.innerHTML+=`<tr><td class="risco">${a}</td><td>${(Math.random()*100).toFixed(2)}</td><td class="risco">+</td></tr>`;
  });
  ativosSeguro.forEach(a=>{
    s.innerHTML+=`<tr><td class="seguro">${a}</td><td>${(Math.random()*100).toFixed(2)}</td><td class="seguro">+</td></tr>`;
  });
}

/* ===== START ===== */
atualizar();
setInterval(atualizar,60000);
</script>

</body>
</html>
