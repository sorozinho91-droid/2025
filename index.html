<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Dashboard Financeiro em Tempo Real</title>
    <!-- Carrega a biblioteca Chart.js -->
    <script src="https://cdn.jsdelivr.net"></script>
    <style>
        body { font-family: sans-serif; background-color: #f0f0f0; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        #relogio { font-size: 24px; font-weight: bold; text-align: center; margin-bottom: 20px; color: #333; }
        .chart-container { position: relative; height: 400px; width: 100%; }
    </style>
</head>
<body>
    <div class="container">
        <div id="relogio">Hora de Brasília: 00:00:00</div>
        <div class="chart-container">
            <canvas id="graficoRealTime"></canvas>
        </div>
    </div>

    <script>
        // --- 1. RELÓGIO DE BRASÍLIA ---
        function atualizarRelogio() {
            const agora = new Date();
            const timeString = agora.toLocaleTimeString('pt-BR', { timeZone: 'America/Sao_Paulo', hour12: false });
            document.getElementById('relogio').innerText = 'Hora de Brasília: ' + timeString;
        }
        setInterval(atualizarRelogio, 1000);
        atualizarRelogio();

        // --- 2. CONFIGURAÇÃO DO GRÁFICO (CHART.JS) ---
        const ctx = document.getElementById('graficoRealTime').getContext('2d');
        const meuGrafico = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [], // Horários aparecerão aqui
                datasets: [{
                    label: 'Mini Índice (WIN$) - Simulação',
                    data: [], // Valores simulados aparecerão aqui
                    borderColor: 'rgba(75, 192, 192, 1)',
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false, // Permite o ajuste de altura
                scales: {
                    x: { beginAtZero: false },
                    y: { beginAtZero: false }
                }
            }
        });

        // --- 3. ATUALIZAÇÃO SIMULADA DE DADOS (TEMPO REAL) ---
        setInterval(() => {
            const horaAtual = new Date().toLocaleTimeString('pt-BR', {timeZone: 'America/Sao_Paulo', hour12: false});
            // Simula um valor do índice (ex: 120.000 pontos) com flutuação aleatória
            const novoValor = 120000 + (Math.random() * 500 - 250); 
            
            // Adiciona o novo ponto de dados
            meuGrafico.data.labels.push(horaAtual);
            meuGrafico.data.datasets.data.push(novoValor);

            // Mantém apenas os últimos 15 pontos no gráfico
            if (meuGrafico.data.labels.length > 15) {
                meuGrafico.data.labels.shift();
                meuGrafico.data.datasets.data.shift();
            }

            meuGrafico.update('none'); // Atualiza o gráfico
        }, 2000); // Atualiza a cada 2 segundos
    </script>
</body>
</html>
