<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>DireÃ§Ã£o do Dia â€“ Risco x SeguranÃ§a</title>

<script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>

<style>
    body {
        margin: 0;
        background: #0f0f0f;
        color: #eee;
        font-family: Arial, sans-serif;
    }

    h2 {
        padding: 15px;
    }

    #chart {
        width: 100vw;
        height: 500px;
    }
</style>
</head>

<body>

<h2>ðŸ“ˆ DireÃ§Ã£o do Mercado â€“ Risco x SeguranÃ§a</h2>
<div id="chart"></div>

<script>
/* â”€â”€â”€â”€â”€ Container â”€â”€â”€â”€â”€ */
const container = document.getElementById('chart');

/* â”€â”€â”€â”€â”€ Criar grÃ¡fico â”€â”€â”€â”€â”€ */
const chart = LightweightCharts.createChart(container, {
    width: container.clientWidth,
    height: container.clientHeight,
    layout: {
        background: { color: '#0f0f0f' },
        textColor: '#ccc',
    },
    grid: {
        vertLines: { color: '#222' },
        horzLines: { color: '#222' },
    },
    timeScale: {
        timeVisible: true,
        secondsVisible: false,
    }
});

/* â”€â”€â”€â”€â”€ SÃ©ries â”€â”€â”€â”€â”€ */
const riskSeries = chart.addLineSeries({
    color: '#00ff88',
    lineWidth: 3,
});

const safetySeries = chart.addLineSeries({
    color: '#ff4444',
    lineWidth: 3,
});

/* â”€â”€â”€â”€â”€ Dados (simulaÃ§Ã£o) â”€â”€â”€â”€â”€ */
let time = Math.floor(Date.now() / 1000);
let risk = 100;
let safety = 100;

function update() {
    risk *= 1 + (Math.random() - 0.5) * 0.002;
    safety *= 1 + (Math.random() - 0.5) * 0.001;

    riskSeries.update({ time: time, value: risk });
    safetySeries.update({ time: time, value: safety });

    time += 60;
}

/* â”€â”€â”€â”€â”€ HistÃ³rico 1 dia (~390 min) â”€â”€â”€â”€â”€ */
for (let i = 0; i < 390; i++) {
    update();
}

/* â”€â”€â”€â”€â”€ Atualiza a cada 60s â”€â”€â”€â”€â”€ */
setInterval(update, 60000);

/* â”€â”€â”€â”€â”€ Resize automÃ¡tico â”€â”€â”€â”€â”€ */
window.addEventListener('resize', () => {
    chart.resize(container.clientWidth, container.clientHeight);
});
</script>

</body>
</html>
