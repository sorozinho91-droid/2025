import yfinance as yf
import pandas as pd
import plotly.graph_objects as go
from datetime import datetime

# Baixar dados do Ibovespa
ibov = yf.download("^BVSP", period="1mo", interval="1d")

# Simulação de índice de sentimento (-1 a +1)
import numpy as np
np.random.seed(42)
ibov['Sentimento'] = np.random.uniform(-1, 1, len(ibov))

# Criar gráfico interativo
fig = go.Figure()
fig.add_trace(go.Scatter(x=ibov.index, y=ibov['Close'], mode='lines', name='Ibovespa', line=dict(color='blue')))
fig.add_trace(go.Scatter(x=ibov.index, y=ibov['Sentimento']*ibov['Close'].max(), mode='lines', name='Sentimento', line=dict(color='red', dash='dash')))

fig.update_layout(
    title='Índice de Sentimento vs Ibovespa',
    xaxis_title='Data',
    yaxis_title='Preço Ibovespa',
    yaxis2=dict(title='Sentimento', overlaying='y', side='right')
)

fig.show()
