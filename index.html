<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Trader Macro</title>
    <!-- Biblioteca Principal -->
    <script src="https://cdn.jsdelivr.net"></script>
    <style>
        body { background: #1a1a1a; color: white; font-family: Arial; text-align: center; }
        #relogio { font-size: 40px; margin: 20px; color: #00ff00; font-family: monospace; }
        .box { width: 90%; max-width: 700px; margin: auto; background: #222; padding: 15px; border-radius: 8px; }
    </style>
</head>
<body>

    <div id="relogio">00:00:00</div>
    
    <div class="box">
        <canvas id="meuGrafico"></canvas>
    </div>

    <script>
        // --- RELÓGIO BRASÍLIA ---
        setInterval(() => {
            const agora = new Date();
            document.getElementById('relogio').innerText = agora.toLocaleTimeString('pt-BR', {
                timeZone: 'America/Sao_Paulo'
            });
        }, 1000);

        // --- CONFIGURAÇÃO DO GRÁFICO ---
        const ctx = document.getElementById('meuGrafico').getContext('2d');
        const grafico = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Início'],
                datasets: [{
                    label: 'Mini Índice (WIN)',
                    data: [125000],
                    borderColor: '#00ff00',
                    backgroundColor: 'rgba(0, 255, 0, 0.1)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: { grid: { color: '#444' }, ticks: { color: '#fff' } },
                    x: { grid: { color: '#444' }, ticks: { color: '#fff' } }
                }
            }
        });

        // --- ATUALIZAÇÃO EM TEMPO REAL ---
        setInterval(() => {
            const hora = new Date().toLocaleTimeString('pt-BR', {timeZone: 'America/Sao_Paulo'});
            const ultimoValor = grafico.data.datasets[0].data[grafico.data.datasets[0].data.length - 1];
            const variacao = (Math.random() - 0.5) * 200; // Simula oscilação
            const novoValor = ultimoValor + variacao;

            grafico.data.labels.push(hora);
            grafico.data.datasets[0].data.push(novoValor);

            if (grafico.data.labels.length > 10) {
                grafico.data.labels.shift();
                grafico.data.datasets[0].data.shift();
            }

            grafico.update();
        }, 2000);
    </script>
</body>
</html>
