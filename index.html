<!DOCTYPE html>
<html lang="pt-br">
<head>
    <script src="cdn.plot.ly"></script>
    <style>
        body { font-family: sans-serif; background: #111; color: #fff; padding: 20px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .card { background: #222; padding: 15px; border-radius: 8px; border-top: 4px solid #444; }
        .risk { border-color: #ff4444; } .safe { border-color: #00c851; }
        #grafico { height: 400px; margin-top: 20px; background: #222; border-radius: 8px; }
    </style>
</head>
<body>
    <h2>Direção do Dólar Global (Risco vs Segurança)</h2>
    <div class="grid">
        <div class="card risk"><h3>Ativos de Risco</h3><div id="tab-risco">Carregando...</div></div>
        <div class="card safe"><h3>Ativos de Segurança</h3><div id="tab-seguranca">Carregando...</div></div>
    </div>
    <div id="grafico"></div>

    <script>
        const CSV_URL = 'SUA_URL_AQUI_DO_CSV_PUBLICADO';

        async function plotar() {
            const res = await fetch(CSV_URL);
            const data = await res.text();
            const rows = data.split('\n').slice(1);
            
            const tempos = [], vRisco = [], vSeguranca = [];
            rows.forEach(row => {
                const cols = row.split(',');
                if(cols[0]) {
                    tempos.push(cols[0]);
                    vRisco.push(parseFloat(cols[1]));
                    vSeguranca.push(parseFloat(cols[2]));
                }
            });

            const trace1 = { x: tempos, y: vRisco, name: 'Índice de Risco', line: {color: '#ff4444'} };
            const trace2 = { x: tempos, y: vSeguranca, name: 'Índice Segurança/Dólar', line: {color: '#00c851'} };

            Plotly.newPlot('grafico', [trace1, trace2], {
                title: 'Correlação Inversa (Se Risco Cai, Dólar Sobe)',
                paper_bgcolor: '#222', plot_bgcolor: '#222', font: {color: '#fff'}
            });
        }
        setInterval(plotar, 60000); plotar();
    </script>
</body>
</html>
