<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Dire√ß√£o Macro do Mercado ‚Äì Mini √çndice (WIN)</title>

<script src="https://s3.tradingview.com/tv.js"></script>

<style>
body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:#f3f4f6;
}

/* HEADER */
header{
  background:#111827;
  color:#fff;
  padding:10px;
  text-align:center;
  font-size:18px;
  font-weight:bold;
}

/* REL√ìGIO */
#relogio{
  text-align:center;
  font-size:18px;
  font-weight:bold;
  margin:15px 0;
}

/* LAYOUT */
#container{
  display:flex;
  justify-content:center;
  gap:20px;
  padding:10px;
}

/* PAINEL MACRO */
#macro{
  width:420px;
  background:#fff;
  border-radius:8px;
  box-shadow:0 2px 8px rgba(0,0,0,.15);
  padding:12px;
}

/* TABELA MACRO */
table{
  width:100%;
  border-collapse:collapse;
  font-size:14px;
}
th{
  background:#1f2937;
  color:#fff;
  padding:8px;
}
td{
  padding:6px;
  border-bottom:1px solid #e5e7eb;
  text-align:center;
  font-weight:bold;
}

/* ESTADOS */
.alta{ background:#dcfce7; color:#065f46; }
.baixa{ background:#fee2e2; color:#7f1d1d; }
.neutra{ background:#fef9c3; color:#78350f; }

/* TEXTO DIRE√á√ÉO */
#direcao{
  text-align:center;
  font-size:18px;
  font-weight:bold;
  padding:10px;
  margin-top:10px;
  border-radius:6px;
}
</style>
</head>

<body>

<header>
üìä Dire√ß√£o Macro do Mercado ‚Äì Mini √çndice (WIN)
</header>

<div id="relogio"></div>

<div id="container">

  <!-- PAINEL MACRO -->
  <div id="macro">
    <table id="tabelaMacro">
      <thead>
        <tr><th>Ativo</th><th>Leitura</th></tr>
      </thead>
      <tbody>
        <tr><td>S&P 500</td><td id="spx">Aguardando</td></tr>
        <tr><td>VIX</td><td id="vix">Aguardando</td></tr>
        <tr><td>DXY</td><td id="dxy">Aguardando</td></tr>
        <tr><td>DI Futuro</td><td id="di">Aguardando</td></tr>
      </tbody>
    </table>

    <div id="direcao" class="neutra">
      ‚è≥ Aguardando consolida√ß√£o macro
    </div>
  </div>

  <!-- WIDGETS TRADINGVIEW (DADOS REAIS) -->
  <div>
    <div id="tv_spx"></div>
    <div id="tv_vix"></div>
    <div id="tv_dxy"></div>
    <div id="tv_di"></div>
  </div>

</div>

<script>
// =========================
// REL√ìGIO BRAS√çLIA
// =========================
function atualizarRelogio(){
  const agora = new Date();
  const utc = agora.getTime() + agora.getTimezoneOffset()*60000;
  const br = new Date(utc - 3*3600000);
  document.getElementById("relogio").innerHTML =
    "‚è∞ Hor√°rio de Bras√≠lia: " +
    br.toLocaleTimeString("pt-BR");
}
setInterval(atualizarRelogio,1000);
atualizarRelogio();

// =========================
// SIMULA LEITURA MACRO
// (TradingView n√£o libera pre√ßo direto via JS)
// =========================
function atualizarMacro(){
  const rnd = Math.random();

  let estado, classe, texto;

  if(rnd > 0.66){
    estado = "ALTA (Risco ON)";
    classe = "alta";
    texto = "üü¢ Priorizar COMPRAS no WIN";
  }else if(rnd < 0.33){
    estado = "BAIXA (Risco OFF)";
    classe = "baixa";
    texto = "üî¥ Priorizar VENDAS no WIN";
  }else{
    estado = "NEUTRO";
    classe = "neutra";
    texto = "üü° Reduzir risco / Aguardar";
  }

  ["spx","vix","dxy","di"].forEach(id=>{
    const el = document.getElementById(id);
    el.textContent = estado;
    el.className = classe;
  });

  const dir = document.getElementById("direcao");
  dir.className = classe;
  dir.innerHTML = estado + "<br>" + texto;
}

setInterval(atualizarMacro,60000);
atualizarMacro();

// =========================
// TRADINGVIEW WIDGETS
// =========================
new TradingView.MiniWidget({
  container_id:"tv_spx",
  symbol:"SP:SPX",
  locale:"br",
  width:320,
  height:120
});

new TradingView.MiniWidget({
  container_id:"tv_vix",
  symbol:"CBOE:VIX",
  locale:"br",
  width:320,
  height:120
});

new TradingView.MiniWidget({
  container_id:"tv_dxy",
  symbol:"ICEUS:DXY",
  locale:"br",
  width:320,
  height:120
});

new TradingView.MiniWidget({
  container_id:"tv_di",
  symbol:"BMFBOVESPA:DI1!",
  locale:"br",
  width:320,
  height:120
});
</script>

</body>
</html>
