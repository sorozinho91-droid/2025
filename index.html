<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Macro Tend√™ncia Dashboard Simulado</title>
    <!-- Inclui a biblioteca Chart.js -->
    <script src="https://cdn.jsdelivr.net"></script>
    <style>
        .dashboard-container { font-family: sans-serif; padding: 20px; background-color: #f9f9f9; }
        .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #ddd; padding-bottom: 10px; }
        .card-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 20px; }
        .card { background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .chart-container { height: 200px; margin-top: 10px; }
        .full-width-chart-container { margin-top: 20px; height: 300px; }
        #last-updated { font-weight: bold; color: #007bff; }
    </style>
</head>
<body>

<div class="dashboard-container">
    <div class="header">
        <h1>üìä Macro Tend√™ncia (Simulado)</h1>
        <div>Hist√≥rico | Online | Sair</div>
    </div>
    <p>√öltima atualiza√ß√£o autom√°tica: <span id="last-updated">Inicializando...</span></p>

    <div class="card-grid">
        <!-- For√ßa da Tend√™ncia - D√≥lar -->
        <div class="card">
            <h2>üìà For√ßa da Tend√™ncia - D√≥lar</h2>
            <div class="chart-container"><canvas id="trendChart"></canvas></div>
        </div>

        <!-- M√©tricas de Risco -->
        <div class="card">
            <h2>‚ö†Ô∏è M√©tricas de Risco</h2>
            <div class="chart-container"><canvas id="riskChart"></canvas></div>
        </div>

        <!-- M√©tricas de Seguran√ßa -->
        <div class="card">
            <h2>üîí M√©tricas de Seguran√ßa</h2>
            <div class="chart-container"><canvas id="securityChart"></canvas></div>
        </div>

        <!-- Distribui√ß√£o de Risco (Pizza) -->
        <div class="card">
            <h2>Distribui√ß√£o de Risco</h2>
            <div class="chart-container"><canvas id="riskPieChart"></canvas></div>
        </div>

        <!-- Distribui√ß√£o de Seguran√ßa (Pizza) -->
        <div class="card">
            <h2>Distribui√ß√£o de Seguran√ßa</h2>
            <div class="chart-container"><canvas id="securityPieChart"></canvas></div>
        </div>
        
        <!-- Resumo do Per√≠odo -->
        <div class="card">
            <h2>Resumo do Per√≠odo</h2>
            <p><small>Este indicador tem car√°ter exclusivamente informativo e n√£o constitui recomenda√ß√£o de compra ou venda de ativos financeiros. As decis√µes tomadas com base nas informa√ß√µes fornecidas s√£o de inteira responsabilidade do usu√°rio.</small></p>
        </div>
    </div>
    
    <!-- Gr√°fico de Linhas Full Width -->
    <div class="full-width-chart-container">
        <h2>For√ßa da Tend√™ncia do D√≥lar no Mundo (Hist√≥rico Simulado)</h2>
        <canvas id="historyChart"></canvas>
    </div>
</div>

<script>
    // Este bloco de c√≥digo AGUARDA a p√°gina carregar completamente antes de rodar
    document.addEventListener('DOMContentLoaded', (event) => {
        
        // --- 1. Configura√ß√£o Inicial dos Gr√°ficos (Chart.js) ---
        const trendChartCtx = document.getElementById('trendChart').getContext('2d');
        const riskChartCtx = document.getElementById('riskChart').getContext('2d');
        const securityChartCtx = document.getElementById('securityChart').getContext('2d');
        const riskPieChartCtx = document.getElementById('riskPieChart').getContext('2d');
        const securityPieChartCtx = document.getElementById('securityPieChart').getContext('2d');
        const historyChartCtx = document.getElementById('historyChart').getContext('2d');

        // Inicializa√ß√£o com dados de exemplo baseados na imagem
        const trendChart = new Chart(trendChartCtx, { type: 'bar', data: { labels: ['Alta (8.7%)', 'Neutra (21.2%)', 'Baixa (69.7%)'], datasets: [{ label: '% de Ativos', data: [8.7, 21.2, 69.7], backgroundColor: ['#28a745', '#ffc107', '#dc3545'] }] }, options: { scales: { y: { beginAtZero: true, max: 100 } } } });
        const riskChart = new Chart(riskChartCtx, { type: 'bar', data: { labels: ['Alta (72.7%)', 'Neutra (18.2%)', 'Baixa (9.1%)'], datasets: [{ label: '% de Risco', data: [72.7, 18.2, 9.1], backgroundColor: ['#dc3545', '#ffc107', '#28a745'] }] }, options: { scales: { y: { beginAtZero: true, max: 100 } } } });
        const securityChart = new Chart(securityChartCtx, { type: 'bar', data: { labels: ['Alta (9.1%)', 'Neutra (27.3%)', 'Baixa (63.6%)'], datasets: [{ label: '% de Seguran√ßa', data: [9.1, 27.3, 63.6], backgroundColor: ['#28a745', '#ffc107', '#dc3545'] }] }, options: { scales: { y: { beginAtZero: true, max: 100 } } } });
        
        const riskPieChart = new Chart(riskPieChartCtx, { type: 'pie', data: { labels: ['Alta (16)', 'Neutro (4)', 'Baixa (2)'], datasets: [{ data:, backgroundColor: ['#dc3545', '#ffc107', '#28a745'] }] } });
        const securityPieChart = new Chart(securityPieChartCtx, { type: 'pie', data: { labels: ['Alta (1)', 'Neutro (3)', 'Baixa (7)'], datasets: [{ data:, backgroundColor: ['#28a745', '#ffc107', '#dc3545'] }] } });

        const historyChart = new Chart(historyChartCtx, { type: 'line', data: { labels: ['T-5s', 'T-4s', 'T-3s', 'T-2s', 'T-1s', 'Agora'], datasets: [{ label: 'Pre√ßo USD/BRL Simulado', borderColor: '#007bff', data: [5.10, 5.12, 5.11, 5.15, 5.14, 5.16], fill: false }] }, options: { responsive: true, maintainAspectRatio: false } });

        // --- 2. L√≥gica de Simula√ß√£o Autom√°tica (setInterval) ---
        function simulateRealTimeData() {
            // 1. Atualiza a hora da √∫ltima atualiza√ß√£o
            document.getElementById('last-updated').textContent = new Date().toLocaleTimeString();

            // 2. Simula novos dados para o gr√°fico de hist√≥rico (linha)
            const lastPrice = historyChart.data.datasets.data[historyChart.data.datasets.data.length - 1];
            // Gera um novo pre√ßo ligeiramente diferente (+/- 0.01)
            const newPrice = lastPrice + (Math.random() - 0.5) * 0.02; 

            // Adiciona o novo ponto e remove o mais antigo para manter o gr√°fico din√¢mico
            historyChart.data.labels.push(new Date().toLocaleTimeString());
            historyChart.data.datasets.data.push(parseFloat(newPrice.toFixed(3)));
            historyChart.data.labels.shift();
            historyChart.data.datasets.data.shift();
            historyChart.update();
        }

        // Inicia a simula√ß√£o autom√°tica a cada 3000 milissegundos (3 segundos)
        setInterval(simulateRealTimeData, 3000); 

    }); // Fim do DOMContentLoaded listener

</script>

</body>
</html>
