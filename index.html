<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Dashboard ‚Äì Risco x Seguran√ßa (Tempo Real)</title>

<!-- Plotly -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<!-- TradingView Tickers -->
<script src="https://s3.tradingview.com/external-embedding/embed-widget-tickers.js"></script>

<style>
body { margin:0; font-family:Arial,sans-serif; background:#f4f6f8; }

/* ===== TOPO ===== */
#painel-cotacoes {
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:28px;
  background:#fff;
  border-bottom:1px solid #ccc;
  z-index:9999;
}

/* ===== CONTE√öDO ===== */
#conteudo {
  margin-top:32px;
  padding:10px;
}

/* ===== GR√ÅFICO ===== */
#grafico {
  width:95%;
  max-width:1200px;
  height:420px;
  margin:20px auto;
  background:#fff;
  border-radius:8px;
  box-shadow:0 2px 6px rgba(0,0,0,0.15);
}

/* ===== TABELAS ===== */
table {
  width:95%;
  max-width:1200px;
  margin:20px auto;
  border-collapse:collapse;
  background:#fff;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
}
th, td {
  padding:8px;
  border:1px solid #ccc;
  text-align:center;
  font-size:14px;
}
thead th {
  background:#2563eb;
  color:white;
}
.risco { color:green; font-weight:bold; }
.seguro { color:red; font-weight:bold; }
.positivo { color:green; }
.negativo { color:red; }

/* ===== BREAKING NEWS ===== */
#painel-news {
  position:fixed;
  top:32px;
  right:10px;
  width:360px;
  background:#111827;
  color:white;
  border-radius:6px;
  box-shadow:0 4px 8px rgba(0,0,0,0.3);
  z-index:9998;
}
.news-header {
  text-align:center;
  font-weight:bold;
  padding:8px;
  background:#1f2937;
}
#newsList {
  max-height:260px;
  overflow-y:auto;
  font-size:13px;
}
.news-item {
  padding:8px;
  border-bottom:1px solid #374151;
}
.news-item a {
  color:#93c5fd;
  text-decoration:none;
}
.breaking {
  animation:piscar 1s infinite;
}
@keyframes piscar {
  0%{background:#7f1d1d;}
  50%{background:#dc2626;}
  100%{background:#7f1d1d;}
}
</style>
</head>

<body>

<!-- ===== TOPO COTA√á√ïES ===== -->
<div id="painel-cotacoes">
<script>
new TradingView.widget({
  symbols: [
    { title:"Brent", proName:"ICE:BRN1!" },
    { title:"WTI", proName:"NYMEX:CL1!" },
    { title:"DXY", proName:"FOREXCOM:DX1!" },
    { title:"S&P 500", proName:"INDEX:SPX" },
    { title:"Dow Jones", proName:"INDEX:DJI" }
  ],
  colorTheme:"light",
  isTransparent:true,
  showSymbolLogo:false,
  locale:"pt",
  width:"100%",
  height:28
});
</script>
</div>

<div id="conteudo">

<h2 style="text-align:center;">Risco x Seguran√ßa ‚Äì Tempo Real (Hist√≥rico do Dia)</h2>

<div id="grafico"></div>

<table id="tabelaRisco">
<thead>
<tr><th>Ativos de Risco</th><th>Valor</th><th>Varia√ß√£o</th></tr>
</thead>
<tbody></tbody>
</table>

<table id="tabelaSeguro">
<thead>
<tr><th>Ativos de Seguran√ßa</th><th>Valor</th><th>Varia√ß√£o</th></tr>
</thead>
<tbody></tbody>
</table>

</div>

<!-- ===== BREAKING NEWS ===== -->
<div id="painel-news">
  <div class="news-header">üö® BREAKING NEWS ‚Äì Macro</div>
  <div id="newsList">
    <div class="news-item">Aguardando not√≠cias...</div>
  </div>
</div>

<!-- ================= SCRIPT PRINCIPAL ================= -->
<script>
// ================= DADOS DO GR√ÅFICO =================
let datas = [];
let risco = [];
let seguro = [];

let valorRisco = 100;
let valorSeguro = 100;

let diaAtual = new Date().toDateString();

// ================= ATIVOS =================
const ativosRisco = [
  {nome:"S&P 500", valor:100},
  {nome:"Nasdaq", valor:100},
  {nome:"Petr√≥leo", valor:100}
];

const ativosSeguro = [
  {nome:"DXY", valor:100},
  {nome:"VIX", valor:100},
  {nome:"Ouro", valor:100}
];

// ================= GR√ÅFICO =================
function plotGrafico(){
  Plotly.react("grafico",[
    { x:datas, y:risco, mode:"lines", name:"Risco", line:{color:"green", width:2} },
    { x:datas, y:seguro, mode:"lines", name:"Seguran√ßa", line:{color:"red", width:2} }
  ],{
    xaxis:{ title:"Hor√°rio", type:"date" },
    yaxis:{ title:"Score" },
    margin:{t:40}
  });
}

// ================= TEMPO REAL =================
function atualizarTempoReal(){
  const agora = new Date();

  // RESET AUTOM√ÅTICO AO VIRAR O DIA
  if(agora.toDateString() !== diaAtual){
    diaAtual = agora.toDateString();
    datas = [];
    risco = [];
    seguro = [];
  }

  valorRisco += (Math.random()-0.5)*2;
  valorSeguro += (Math.random()-0.5)*1;

  datas.push(agora);
  risco.push(Number(valorRisco.toFixed(2)));
  seguro.push(Number(valorSeguro.toFixed(2)));

  plotGrafico();

  atualizarTabelas();
}

// ================= TABELAS =================
function atualizarTabelas(){
  const tr = document.querySelector("#tabelaRisco tbody");
  const ts = document.querySelector("#tabelaSeguro tbody");
  tr.innerHTML = "";
  ts.innerHTML = "";

  ativosRisco.forEach(a=>{
    const novo = a.valor + (Math.random()-0.5)*2;
    const varp = ((novo-a.valor)/a.valor)*100;
    a.valor = novo;
    tr.innerHTML += `<tr>
      <td class="risco">${a.nome}</td>
      <td>${novo.toFixed(2)}</td>
      <td class="${varp>=0?'positivo':'negativo'}">${varp.toFixed(2)}%</td>
    </tr>`;
  });

  ativosSeguro.forEach(a=>{
    const novo = a.valor + (Math.random()-0.5)*1;
    const varp = ((novo-a.valor)/a.valor)*100;
    a.valor = novo;
    ts.innerHTML += `<tr>
      <td class="seguro">${a.nome}</td>
      <td>${novo.toFixed(2)}</td>
      <td class="${varp>=0?'positivo':'negativo'}">${varp.toFixed(2)}%</td>
    </tr>`;
  });
}

// ================= START =================
plotGrafico();
atualizarTempoReal();
setInterval(atualizarTempoReal, 60000); // 1 minuto
</script>

</body>
</html>
