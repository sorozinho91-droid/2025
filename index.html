<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Risco x Segurança - Responsivo</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; text-align: center; }
        html, body { width: 100%; height: 100%; }
        #grafico { width: 100%; height: 90vh; } /* ocupa 90% da altura da tela */
        h2 { margin-top: 10px; }
    </style>
</head>
<body>
    <h2>Histórico de Preço: Ativos de Risco vs Seguros</h2>
    <div id="grafico"></div>

    <script>
        var datas = [];
        var risco = [];
        var seguro = [];

        // Simular histórico inicial (últimos 10 dias)
        for(var i=10; i>=1; i--){
            var data = new Date();
            data.setDate(data.getDate() - i);
            datas.push(data.toLocaleDateString());

            risco.push(100 + Math.random() * 10);
            seguro.push(100 + Math.random() * 5);
        }

        var traceRisco = {
            x: datas,
            y: risco,
            type: 'scatter',
            mode: 'lines+markers',
            name: 'Ativos de Risco: Ações, ETFs agressivos',
            line: {color: 'red', shape: 'spline'}
        };

        var traceSeguro = {
            x: datas,
            y: seguro,
            type: 'scatter',
            mode: 'lines+markers',
            name: 'Ativos Seguros: Tesouro, CDB, Ouro',
            line: {color: 'green', shape: 'spline'}
        };

        var data = [traceRisco, traceSeguro];

        var layout = {
            title: 'Histórico de Preço: Risco x Segurança',
            xaxis: { title: 'Data', showgrid: true },
            yaxis: { title: 'Preço', showgrid: true },
            legend: { x: 0.1, y: 1.1 },
            autosize: true
        };

        var config = { responsive: true };

        Plotly.newPlot('grafico', data, layout, config);

        // Atualizar gráfico a cada 2 segundos com novos valores simulados
        setInterval(function(){
            var agora = new Date().toLocaleTimeString();
            datas.push(agora);
            risco.push(risco[risco.length-1] + (Math.random() - 0.5)*2);
            seguro.push(seguro[seguro.length-1] + (Math.random() - 0.5));

            Plotly.react('grafico', [
                { x: datas, y: risco, type: 'scatter', mode: 'lines+markers', name: 'Ativos de Risco: Ações, ETFs agressivos', line: {color: 'red', shape: 'spline'} },
                { x: datas, y: seguro, type: 'scatter', mode: 'lines+markers', name: 'Ativos Seguros: Tesouro, CDB, Ouro', line: {color: 'green', shape: 'spline'} }
            ], layout, config);
        }, 2000);
    </script>
</body>
</html>
