<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Risco x Segurança — Dados Reais</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            text-align: center;
        }
        #grafico {
            width: 100%;
            height: 85vh; /* adapta ao tamanho da tela */
        }
    </style>
</head>
<body>

<h2>Ativos de Risco x Segurança (Dados Reais)</h2>
<div id="grafico"></div>

<script>
    const simboloRisco = "%5EGSPC"; // S&P 500
    const simboloSeguro = "TLT";   // Treasury ETF

    async function buscarDados(simbolo) {
        const url = `https://query1.finance.yahoo.com/v8/finance/chart/${simbolo}?interval=1m&range=1d`;
        const resposta = await fetch(url);
        const dados = await resposta.json();

        const timestamps = dados.chart.result[0].timestamp;
        const precos = dados.chart.result[0].indicators.quote[0].close;

        return {
            x: timestamps.map(t => new Date(t * 1000).toLocaleTimeString()),
            y: precos
        };
    }

    async function carregarGrafico() {
        const risco = await buscarDados(simboloRisco);
        const seguro = await buscarDados(simboloSeguro);

        const traceRisco = {
            x: risco.x,
            y: risco.y,
            type: 'scatter',
            mode: 'lines',
            name: 'Ativo de Risco (S&P 500)',
            line: { color: 'red' }
        };

        const traceSeguro = {
            x: seguro.x,
            y: seguro.y,
            type: 'scatter',
            mode: 'lines',
            name: 'Ativo Seguro (Treasuries)',
            line: { color: 'green' }
        };

        const layout = {
            title: 'Risco x Segurança — Tempo Real',
            xaxis: { title: 'Hora', automargin: true },
            yaxis: { title: 'Preço', automargin: true },
            margin: { t: 50, l: 50, r: 30, b: 50 }
        };

        Plotly.newPlot(
            'grafico',
            [traceRisco, traceSeguro],
            layout,
            { responsive: true }
        );
    }

    carregarGrafico();

    // Atualiza dados a cada 6
