<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Risco x SeguranÃ§a â€” GrÃ¡fico em tempo real</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body {
  background:#000;
  color:#fff;
  font-family:Arial, sans-serif;
  padding:20px;
}
canvas{
  background:#111;
  border-radius:8px;
}
</style>
</head>
<body>

<h2>ğŸ“Š Risco vs SeguranÃ§a</h2>
<canvas id="riskChart" width="800" height="400"></canvas>

<script>
// Labels e datasets
const labels = [];
const riskData = [];
const safeData = [];

const data = {
  labels: labels,
  datasets: [
    {
      label: 'Risco (S&P500, Nasdaq, Ibovespa, WTI)',
      borderColor: 'rgba(255,99,132,1)',
      backgroundColor: 'rgba(255,99,132,0.2)',
      data: riskData
    },
    {
      label: 'SeguranÃ§a (DXY, Ouro, UST 10Y)',
      borderColor: 'rgba(54,162,235,1)',
      backgroundColor: 'rgba(54,162,235,0.2)',
      data: safeData
    }
  ]
};

const config = {
  type: 'line',
  data: data,
  options: {
    responsive:true,
    plugins: { legend: { display:true } },
    scales: {
      y: { beginAtZero:false, ticks: { color:'#fff' } },
      x: { ticks: { color:'#fff' } }
    }
  }
};

const riskChart = new Chart(
  document.getElementById('riskChart'),
  config
);

// FunÃ§Ã£o para buscar variaÃ§Ã£o real via TradingView Mini Widgets
// OBS: Aqui usamos simulador para demo; vocÃª pode substituir pelo fetch de API real
async function fetchData() {
  // Substitua com fetch de API real
  const now = new Date().toLocaleTimeString();
  labels.push(now);
  if(labels.length>20) labels.shift();

  // Exemplo de valores simulados (substituir por valores reais)
  const risk = Math.random()*2-1;
  const safe = Math.random()*1-0.5;

  riskData.push(risk);
  safeData.push(safe);

  if(riskData.length>20) riskData.shift();
  if(safeData.length>20) safeData.shift();

  riskChart.update();
}

// Atualiza a cada 5 segundos
setInterval(fetchData, 5000);
</script>

</body>
</html>
