<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Painel Macro ‚Äì Risco x Seguran√ßa</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:#f3f4f6;
}

header{
  background:#111827;
  color:#fff;
  padding:12px;
  text-align:center;
  font-size:20px;
  font-weight:bold;
}

#relogio{
  background:#1f2937;
  color:#fff;
  text-align:center;
  padding:8px;
  font-size:16px;
  font-weight:bold;
}

#conteudo{
  display:flex;
  justify-content:center;
  align-items:flex-start;
  gap:20px;
  padding:20px;
}

#tabela-central{
  background:#fff;
  border-radius:8px;
  box-shadow:0 2px 8px rgba(0,0,0,.15);
  padding:15px;
  width:320px;
}

#tabela-central h3{
  text-align:center;
  margin-top:0;
  background:#1f2937;
  color:#fff;
  padding:8px;
  border-radius:6px;
}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}

th{
  background:#1f2937;
  color:#fff;
  padding:8px;
}

td{
  padding:8px;
  text-align:center;
  font-weight:bold;
  border-bottom:1px solid #e5e7eb;
}

.alta{background:#dcfce7;color:#065f46;}
.baixa{background:#fee2e2;color:#7f1d1d;}
.neutra{background:#fef9c3;color:#78350f;}

#grafico-box{
  background:#fff;
  border-radius:8px;
  box-shadow:0 2px 8px rgba(0,0,0,.15);
  padding:15px;
  width:700px;
}
</style>
</head>

<body>

<header>üìä Painel Macro ‚Äì Ativos de Risco x Seguran√ßa</header>
<div id="relogio">‚è∞ --:--:--</div>

<div id="conteudo">

  <!-- TABELA CENTRAL -->
  <div id="tabela-central">
    <h3>Vis√£o Macro</h3>
    <table>
      <thead>
        <tr><th>Ativo</th><th>Status</th></tr>
      </thead>
      <tbody>
        <tr><td>S&P 500</td><td id="sp" class="neutra">NEUTRO</td></tr>
        <tr><td>VIX</td><td id="vix" class="neutra">NEUTRO</td></tr>
        <tr><td>DXY</td><td id="dxy" class="neutra">NEUTRO</td></tr>
        <tr><td>DI Futuro</td><td id="di" class="neutra">NEUTRO</td></tr>
      </tbody>
    </table>
  </div>

  <!-- GR√ÅFICO -->
  <div id="grafico-box">
    <canvas id="grafico"></canvas>
  </div>

</div>

<script>
/* ================= REL√ìGIO ================= */
function atualizarRelogio(){
  document.getElementById("relogio").innerHTML =
    "‚è∞ Hor√°rio de Bras√≠lia: " + new Date().toLocaleTimeString("pt-BR");
}
setInterval(atualizarRelogio,1000);
atualizarRelogio();

/* ================= DADOS ================= */
let datas = [];
let risco = [];
let seguro = [];

let valorRisco = 0;
let valorSeguro = 0;

/* ================= GR√ÅFICO ================= */
const ctx = document.getElementById("grafico").getContext("2d");

const grafico = new Chart(ctx,{
  type:"line",
  data:{
    labels:[],
    datasets:[
      {
        label:"Ativos de Risco",
        data:[],
        borderColor:"#16a34a",
        backgroundColor:"rgba(22,163,74,0.15)",
        tension:0.4,
        fill:true
      },
      {
        label:"Ativos de Seguran√ßa",
        data:[],
        borderColor:"#dc2626",
        backgroundColor:"rgba(220,38,38,0.15)",
        tension:0.4,
        fill:true
      }
    ]
  },
  options:{
    responsive:true,
    interaction:{mode:"index",intersect:false},
    scales:{
      x:{title:{display:true,text:"Hor√°rio"}},
      y:{title:{display:true,text:"For√ßa Relativa"}}
    }
  }
});

/* ================= HIST√ìRICO DO DIA ================= */
function gerarHistoricoDia(){
  datas = [];
  risco = [];
  seguro = [];

  const agora = new Date();
  const inicioDia = new Date();
  inicioDia.setHours(0,0,0,0);

  let vr = 0;
  let vs = 0;

  for(let d = new Date(inicioDia); d <= agora; d.setMinutes(d.getMinutes()+1)){
    vr += (Math.random()-0.5)*0.4;
    vs += (Math.random()-0.5)*0.3;

    datas.push(new Date(d));
    risco.push(vr);
    seguro.push(vs);
  }

  valorRisco = vr;
  valorSeguro = vs;

  atualizarGraficoVisual();
}

/* ================= ATUALIZA√á√ÉO ================= */
function atualizarGraficoVisual(){
  grafico.data.labels = datas.map(d =>
    d.toLocaleTimeString("pt-BR",{hour12:false})
  );
  grafico.data.datasets[0].data = risco;
  grafico.data.datasets[1].data = seguro;
  grafico.update();
}

function atualizarGrafico(){
  const agora = new Date();

  if(datas.length > 0){
    const ultima = datas[datas.length-1];
    if(ultima.toDateString() !== agora.toDateString()){
      gerarHistoricoDia();
      return;
    }
  }

  valorRisco += (Math.random()-0.5)*0.4;
  valorSeguro += (Math.random()-0.5)*0.3;

  datas.push(agora);
  risco.push(valorRisco);
  seguro.push(valorSeguro);

  atualizarGraficoVisual();
  atualizarTabela();
}

/* ================= TABELA ================= */
function definirStatus(el, valor){
  el.className = valor > 0.2 ? "alta" : valor < -0.2 ? "baixa" : "neutra";
  el.innerText = valor > 0.2 ? "ALTA" : valor < -0.2 ? "BAIXA" : "NEUTRO";
}

function atualizarTabela(){
  definirStatus(document.getElementById("sp"), valorRisco);
  definirStatus(document.getElementById("vix"), -valorRisco);
  definirStatus(document.getElementById("dxy"), valorSeguro);
  definirStatus(document.getElementById("di"), valorSeguro);
}

/* ================= START ================= */
gerarHistoricoDia();
setInterval(atualizarGrafico, 60000); // 1 minuto
</script>

</body>
</html>
