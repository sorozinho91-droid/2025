<script>
    // Substitua 'ws://localhost:8080' pelo endereço do seu servidor WebSocket real
    const socket = new WebSocket('ws://localhost:8080');

    socket.addEventListener('open', (event) => {
        console.log('Conexão WebSocket estabelecida!', event);
        // Exemplo: Enviar um pedido de dados específico ao servidor, se necessário
        // socket.send(JSON.stringify({ type: "subscribe", symbol: "USD" })); 
    });

    socket.addEventListener('message', (event) => {
        const data = JSON.parse(event.data);
        console.log('Dados em tempo real recebidos:', data);
        // Chame suas funções para atualizar os gráficos aqui
        // Exemplo: updateDollarChart(data.price); 
    });

    socket.addEventListener('close', (event) => {
        console.log('Conexão WebSocket fechada:', event);
        // Lidar com a reconexão, se necessário
    });

    socket.addEventListener('error', (error) => {
        console.error('Erro no WebSocket:', error);
    });

    // Função de exemplo para atualizar um gráfico (você precisará adaptar isso)
    function updateDollarChart(newPrice) {
        // Lógica para encontrar o elemento do gráfico e atualizá-lo com newPrice
        console.log("Atualizando preço do dólar para: " + newPrice);
        // Se estiver usando Chart.js, aqui você atualizaria o dataset e chamaria chart.update()
    }
</script>
