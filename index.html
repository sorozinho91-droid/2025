<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Dashboard ‚Äì Risco x Seguran√ßa Intraday + Not√≠cias</title>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<style>
body { font-family: Arial, sans-serif; margin:0; background:#f4f6f8; }
header { background:#1f2937; color:white; padding:15px; text-align:center; }
#controls { text-align:center; padding:10px; }
button { margin:5px; padding:8px 16px; border:none; border-radius:4px; cursor:pointer; background:#e5e7eb; }
button.active { background:#2563eb; color:white; }

#grafico { width:90%; max-width:1200px; height:400px; margin:20px auto; background:#fff; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.1); }

table { width:90%; max-width:1200px; margin:20px auto; border-collapse: collapse; background:#fff; box-shadow:0 2px 6px rgba(0,0,0,0.05);}
th, td { padding:8px; border:1px solid #ccc; text-align:center; font-size:14px;}
thead th { background:#2563eb; color:white;}
.risco { color:green; }        
.seguro { color:red; }         
.positivo { color:green; }
.negativo { color:red; }

/* ===== PAIN√âIS DE NOT√çCIAS ABAIXO DO GR√ÅFICO ===== */
#noticiasContainer {
    width:90%;
    max-width:1200px;
    margin:10px auto 30px auto;
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
}

#painel-news, #alerta-mercado {
    flex: 1;
    min-width: 360px;
    background:#111827;
    color:white;
    border-radius:6px;
    box-shadow:0 4px 8px rgba(0,0,0,0.3);
    max-height:300px;
    overflow-y:auto;
    font-size:13px;
}

/* ALERTA MERCADO ESTILO DIFERENTE */
#alerta-mercado {
    background: #ffffff;
    border-left: 5px solid #c00000;
    color: #000;
    font-size:12px;
}

.news-header, .alerta-header {
    text-align:center;
    font-weight:bold;
    padding:8px;
    border-radius:6px 6px 0 0;
}

.news-header {
    background:#1f2937;
    color:white;
}

.alerta-header {
    background:#c00000;
    color:white;
}

.news-item{
  padding:8px;
  border-bottom:1px solid #374151;
}

.news-item a{
  color:#93c5fd;
  text-decoration:none;
}

.breaking{
  animation:piscar 1s infinite;
}

.piscar-alerta {
  animation: pisca 1s infinite;
}

@keyframes piscar{
  0%{background:#7f1d1d;}
  50%{background:#dc2626;}
  100%{background:#7f1d1d;}
}
</style>
</head>
<body>

<header>
<h2>Risco x Seguran√ßa ‚Äì Linha do Tempo Intraday</h2>
</header>

<div id="controls">
<button onclick="setTimeframe(60,this)" class="active">1min</button>
<button onclick="setTimeframe(300,this)">5min</button>
<button onclick="setTimeframe(600,this)">10min</button>
</div>

<div id="grafico"></div>

<!-- PAIN√âIS DE NOT√çCIAS ABAIXO DO GR√ÅFICO -->
<div id="noticiasContainer">
    <div id="painel-news">
      <div class="news-header">üö® BREAKING NEWS ‚Äì Macro</div>
      <div id="newsList">
        <div id="aguardando" class="news-item">Aguardando not√≠cias...</div>
      </div>
    </div>

    <div id="alerta-mercado">
      <div class="alerta-header">‚ö†Ô∏è ALERTA MERCADO</div>
      <div id="alerta-conteudo">Aguardando not√≠cias...</div>
    </div>
</div>

<!-- TABELAS DE ATIVOS -->
<table id="tabelaRisco">
<thead>
<tr><th>Ativo de Risco</th><th>Valor Atual</th><th>Varia√ß√£o (%)</th></tr>
</thead>
<tbody></tbody>
</table>

<table id="tabelaSeguro">
<thead>
<tr><th>Ativo de Seguran√ßa</th><th>Valor Atual</th><th>Varia√ß√£o (%)</th></tr>
</thead>
<tbody></tbody>
</table>

<audio id="alertSound">
  <source src="https://assets.mixkit.co/sfx/preview/mixkit-alert-alarm-1005.mp3" type="audio/mpeg">
</audio>

<audio id="alerta-som">
  <source src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" type="audio/ogg">
</audio>

<script>
// ==== VARI√ÅVEIS ATIVOS ====
let valorRisco=100, valorSeguro=100, timer=null, timeframe=60;
let ativosRisco = [
    {nome:"Ouro Futuros", valor:2766.2},{nome:"Cobre Futuros", valor:4.2315},{nome:"Petr√≥leo WTI", valor:73.17},
    {nome:"Min√©rio de Ferro", valor:56.72},{nome:"Vale SA ADR", valor:9.16},{nome:"Petrobras ADR", valor:13.88},
    {nome:"Soja Chicago", valor:1045},{nome:"Oslo All Share", valor:1709.43},{nome:"Dow Jones Futuros", valor:44904},
    {nome:"The Global Dow USD", valor:5079.14},{nome:"BSE Sensex 30", valor:75366.17},{nome:"Hang Seng Futuros", valor:20430.5},
    {nome:"China A50 Futuros", valor:12983},{nome:"SZSE Component", valor:10292.73},{nome:"Shanghai Composite", valor:3252.63},
    {nome:"Financial Select Sector", valor:51.41},{nome:"Consumer Staples", valor:80.01},{nome:"Energy Select Sector", valor:90.36},
    {nome:"SPDR Metals & Mining", valor:58.68},{nome:"iShares MSCI Emerging Markets", valor:42.17},{nome:"iShares Semiconductor ETF", valor:212.55}
];
let ativosSeguranca = [
    {nome:"DXY - √çndice D√≥lar", valor:107.16},{nome:"EUR/BRL", valor:6.1843},{nome:"S&P 500 VIX Futuros", valor:17.61},
    {nome:"USD/MXN", valor:20.665},{nome:"USD/NOK", valor:11.2378},{nome:"USD/NZD", valor:1.7565},
    {nome:"USD/AUD", valor:1.5892},{nome:"USD/KRW", valor:1432.84},{nome:"USD/CNY", valor:7.2509}
];

let datasGrafico=[], serieRisco=[], serieSeguranca=[];

// ==== FUN√á√ïES ====
function gerarHistoricoDia(){ /* c√≥digo igual ao anterior */ }
function atualizarTabelas(){ /* c√≥digo igual ao anterior */ }
function plotarGrafico(){ /* c√≥digo igual ao anterior */ }
function atualizarGrafico(){ /* c√≥digo igual ao anterior */ }
function setTimeframe(segundos,botao){ /* c√≥digo igual ao anterior */ }

// ==== NOT√çCIAS ====
const palavras = ["fed","cpi","juros","taxa","guerra","war","infla√ß√£o","inflation","banco central","central bank"];
const lista = document.getElementById("newsList");
const painel = document.getElementById("painel-news");
const header = document.querySelector(".news-header");
const som = document.getElementById("alertSound");
let cache = {};
let alertaAtivo = false;

async function buscarNoticiasMacro(){ /* c√≥digo igual ao anterior */ }

const alertaConteudo = document.getElementById("alerta-conteudo");
const alertaBox = document.getElementById("alerta-mercado");
const somAlerta = document.getElementById("alerta-som");
const rssUrl = "https://news.google.com/rss/search?q=presidente+EUA+OR+presidente+Brasil+juros+mercado+financeiro&hl=pt-BR&gl=BR&ceid=BR:pt";
const proxy = "https://api.allorigins.win/raw?url=";
let ultimaNoticia = "";

async function buscarNoticiasAlerta(){ /* c√≥digo igual ao anterior */ }

// ==== INICIALIZA√á√ÉO ====
gerarHistoricoDia();
plotarGrafico();
atualizarTabelas();
timer=setInterval(atualizarGrafico,timeframe*1000);
buscarNoticiasMacro();
setInterval(buscarNoticiasMacro,30000);
buscarNoticiasAlerta();
setInterval(buscarNoticiasAlerta,60000);
window.addEventListener('resize',()=>{Plotly.Plots.resize('grafico');});
</script>

</body>
</html>
