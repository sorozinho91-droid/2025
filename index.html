<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>GrÃ¡fico Risco x SeguranÃ§a</title>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
  margin:0;
  background:#f3f4f6;
  font-family:Arial, sans-serif;
}
#container{
  width:90%;
  max-width:900px;
  margin:40px auto;
  background:#ffffff;
  padding:20px;
  border-radius:10px;
  box-shadow:0 4px 12px rgba(0,0,0,.15);
}
h2{
  text-align:center;
  margin-bottom:15px;
}
</style>
</head>

<body>

<div id="container">
  <h2>ðŸ“Š Ativos de Risco x SeguranÃ§a (Tempo Real)</h2>
  <canvas id="grafico"></canvas>
</div>

<script>
// ================= CONFIGURAÃ‡ÃƒO =================
const INTERVALO = 2000; // ms (2 segundos)
const MAX_PONTOS = 60;

// ================= VARIÃVEIS =================
let risco = 0;
let seguranca = 0;

// ================= CRIA GRÃFICO =================
const ctx = document.getElementById("grafico").getContext("2d");

const grafico = new Chart(ctx, {
  type: "line",
  data: {
    labels: [],
    datasets: [
      {
        label: "Ativos de Risco (%)",
        data: [],
        borderColor: "#dc2626",
        backgroundColor: "rgba(220,38,38,0.1)",
        borderWidth: 2,
        tension: 0.4,
        fill: true
      },
      {
        label: "Ativos de SeguranÃ§a (%)",
        data: [],
        borderColor: "#16a34a",
        backgroundColor: "rgba(22,163,74,0.1)",
        borderWidth: 2,
        tension: 0.4,
        fill: true
      }
    ]
  },
  options: {
    responsive: true,
    interaction: {
      mode: "index",
      intersect: false
    },
    scales: {
      y: {
        title: {
          display: true,
          text: "VariaÃ§Ã£o (%)"
        }
      },
      x: {
        title: {
          display: true,
          text: "HorÃ¡rio"
        }
      }
    }
  }
});

// ================= ATUALIZA EM TEMPO REAL =================
function atualizarGrafico() {
  const horario = new Date().toLocaleTimeString("pt-BR");

  // SimulaÃ§Ã£o contÃ­nua e realista
  risco += (Math.random() - 0.5) * 0.2;
  seguranca += (Math.random() - 0.5) * 0.12;

  grafico.data.labels.push(horario);
  grafico.data.datasets[0].data.push(Number(risco.toFixed(2)));
  grafico.data.datasets[1].data.push(Number(seguranca.toFixed(2)));

  // MantÃ©m histÃ³rico limitado
  if (grafico.data.labels.length > MAX_PONTOS) {
    grafico.data.labels.shift();
    grafico.data.datasets.forEach(d => d.data.shift());
  }

  grafico.update();
}

// ================= INICIALIZA =================
atualizarGrafico();
setInterval(atualizarGrafico, INTERVALO);
</script>

</body>
</html>
