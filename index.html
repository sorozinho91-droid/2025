<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>GPS Mercado 2026 - Ultra-Realtime</title>
    <!-- CDN ATUALIZADA 2026 -->
    <script src="https://cdn.jsdelivr.net"></script>
    <style>
        body { background: #0b0f1a; color: white; font-family: sans-serif; padding: 20px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; max-width: 1000px; margin: auto; }
        .card { background: #161b2a; padding: 20px; border-radius: 10px; text-align: center; border: 1px solid #2d3343; }
        .val { font-size: 2rem; font-weight: bold; display: block; margin-top: 10px; }
        #chart-wrap { max-width: 1000px; margin: 20px auto; height: 400px; background: #161b2a; padding: 15px; border-radius: 10px; }
        #msg { text-align: center; padding: 10px; margin-bottom: 10px; font-weight: bold; border-radius: 5px; }
    </style>
</head>
<body>

    <div id="msg" style="background: #1e293b;">SISTEMA INICIALIZANDO...</div>

    <div class="grid">
        <div class="card">RISCO <span id="vRisco" class="val" style="color:#00ff88">0.00%</span></div>
        <div class="card">PRESS츾O (AZUL) <span id="vPress" class="val" style="color:#00a2ff">0.00%</span></div>
    </div>

    <div id="chart-wrap">
        <canvas id="meuGrafico"></canvas>
    </div>

    <script>
        let chart;
        const labels = [];
        const dadosRisco = [];
        const dadosPressao = [];

        function start() {
            const ctx = document.getElementById('meuGrafico');
            if (!ctx) return;

            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        { label: 'Risco', data: dadosRisco, borderColor: '#00ff88', tension: 0.3, pointRadius: 0 },
                        { label: 'Press칚o Global', data: dadosPressao, borderColor: '#00a2ff', borderDash: [5, 5], tension: 0.3, pointRadius: 0 }
                    ]
                },
                options: { 
                    responsive: true, 
                    maintainAspectRatio: false,
                    scales: { y: { grid: { color: '#2d3343' } }, x: { display: false } }
                }
            });

            // Loop de Atualiza칞칚o (3 segundos)
            setInterval(update, 3000);
        }

        function update() {
            const r = (Math.random() * 2 - 1).toFixed(2);
            const p = (Math.random() * 2 - 1).toFixed(2);

            // Atualiza Texto
            document.getElementById('vRisco').innerText = r + "%";
            document.getElementById('vPress').innerText = p + "%";

            // Alerta visual
            const msg = document.getElementById('msg');
            if (r > p) {
                msg.innerText = "游 VI칄S DE ALTA (Mini 칈ndice)";
                msg.style.background = "#064e3b";
            } else {
                msg.innerText = "丘멆잺 VI칄S DE BAIXA (Mini 칈ndice)";
                msg.style.background = "#7f1d1d";
            }

            // Atualiza Gr치fico
            if (labels.length > 20) {
                labels.shift();
                dadosRisco.shift();
                dadosPressao.shift();
            }
            labels.push(new Date().toLocaleTimeString());
            dadosRisco.push(r);
            dadosPressao.push(p);

            chart.update('none'); // Update sem anima칞칚o pesada
        }

        // Garante que o gr치fico s칩 inicia ap칩s carregar tudo
        if (document.readyState === 'complete') { start(); } 
        else { window.addEventListener('load', start); }
    </script>
</body>
</html>
