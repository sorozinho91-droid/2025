<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Ativos de Risco x Segurança - Tempo Real</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        #grafico { width: 90%; height: 500px; margin: auto; }
    </style>
</head>
<body>
    <h2>Ativos de Risco x Seguros - Tempo Real</h2>
    <div id="grafico"></div>

    <script>
        // Arrays iniciais
        var datas = [];
        var risco = [];
        var seguro = [];

        // Valores iniciais
        var valor_risco = 100;
        var valor_seguro = 100;

        // Função para gerar novos valores simulados
        function atualizarValores(valor) {
            return Math.max(0, valor + (Math.random() - 0.5) * 2);
        }

        // Adicionar primeiro ponto
        var agora = new Date().toLocaleTimeString();
        datas.push(agora);
        risco.push(valor_risco);
        seguro.push(valor_seguro);

        // Criar gráfico inicial
        var traceRisco = {
            x: datas,
            y: risco,
            type: 'scatter',
            mode: 'lines+markers',
            name: 'Ativos de Risco',
            line: {color: 'red'}
        };

        var traceSeguro = {
            x: datas,
            y: seguro,
            type: 'scatter',
            mode: 'lines+markers',
            name: 'Ativos Seguros',
            line: {color: 'green'}
        };

        var data = [traceRisco, traceSeguro];

        var layout = {
            title: 'Ativos de Risco vs Seguros - Tempo Real',
            xaxis: {title: 'Hora'},
            yaxis: {title: 'Valor'},
            margin: {t:50, r:30, l:50, b:50}
        };

        Plotly.newPlot('grafico', data, layout);

        // Atualizar a cada 2 segundos
        setInterval(function(){
            var agora = new Date().toLocaleTimeString();
            datas.push(agora);
            valor_risco = atualizarValores(valor_risco);
            valor_seguro = atualizarValores(valor_seguro);
            risco.push(valor_risco);
            seguro.push(valor_seguro);

            Plotly.update('grafico', {
                x: [datas, datas],
                y: [risco, seguro]
            }, layout);

        }, 2000);
    </script>
</body>
</html>

