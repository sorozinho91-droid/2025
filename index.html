<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Dashboard Financeiro Profissional</title>

<style>
body{
  background:#0e0e0e;
  color:#e0e0e0;
  font-family:Arial, Helvetica, sans-serif;
  margin:20px;
}
h2{
  font-size:18px;
  margin-bottom:10px;
  color:#fff;
}
.dashboard{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(420px,1fr));
  gap:20px;
}
.section{
  background:#111;
  padding:15px;
  border-radius:8px;
  max-height:520px;
  overflow-y:auto;
}
.news-item{
  border-bottom:1px solid #222;
  padding:8px 0;
}
.news-item:last-child{border-bottom:none;}
.news-title a{
  color:#03a9f4;
  text-decoration:none;
  font-weight:bold;
}
.news-title a:hover{text-decoration:underline;}
.news-desc{font-size:14px;color:#ccc}

/* urgÃªncia */
.urgente-vermelho{background:#b71c1c;padding:6px;border-radius:4px;}
.urgente-laranja{background:#ff6f00;padding:6px;border-radius:4px;}
.urgente-amarelo{background:#fbc02d;color:#000;padding:6px;border-radius:4px;}
</style>
</head>

<body>

<div class="dashboard">

<div class="section" id="mercado"><h2>ğŸ“° Mercado Financeiro</h2></div>
<div class="section" id="breaking"><h2>ğŸš¨ Breaking News</h2></div>

<div class="section" id="minerio"><h2>ğŸª¨ MinÃ©rio de Ferro</h2></div>
<div class="section" id="petroleo"><h2>ğŸ›¢ï¸ PetrÃ³leo</h2></div>
<div class="section" id="dxy"><h2>ğŸ’µ DXY / DÃ³lar</h2></div>
<div class="section" id="juros"><h2>ğŸ“ˆ Juros Americanos</h2></div>
<div class="section" id="bancos"><h2>ğŸ¦ Bancos</h2></div>
<div class="section" id="bolsasUSA"><h2>ğŸ‡ºğŸ‡¸ Bolsas Americanas</h2></div>
<div class="section" id="bolsasGlobal"><h2>ğŸŒ Bolsas Europa & Ãsia</h2></div>

</div>

<script>
// ========= URGÃŠNCIA =========
const palavrasUrgentes=[
 {p:'guerra',c:'urgente-vermelho'},
 {p:'crise',c:'urgente-laranja'},
 {p:'queda',c:'urgente-laranja'},
 {p:'falÃªncia',c:'urgente-laranja'},
 {p:'alta forte',c:'urgente-amarelo'}
];

function getUrgencia(a){
 const t=(a.title+a.desc).toLowerCase();
 for(const p of palavrasUrgentes){
   if(t.includes(p.p)) return p.c;
 }
 return '';
}

// ========= TEMAS =========
const temas={
 minerio:["minÃ©rio de ferro","iron ore","vale","aÃ§o"],
 petroleo:["petrÃ³leo","oil","brent","wti","opec"],
 dxy:["dxy","dÃ³lar","usd","fed"],
 juros:["juros","interest rate","fed","fomc","treasury","yield"],
 bancos:["banco","bank","itaÃº","bradesco","jpmorgan","goldman"],
 bolsasUSA:["dow jones","nasdaq","s&p 500","wall street"],
 bolsasGlobal:["nikkei","hang seng","dax","ftse","europa","asia"]
};

// ========= FEEDS =========
const feedsMercado=[
 "https://valor.globo.com/rss/mercados/",
 "https://www.infomoney.com.br/feed/"
];
const feedsBreaking=[
 "https://g1.globo.com/rss/g1/ultimas-noticias.rss"
];

// ========= FUNÃ‡Ã•ES =========
function stripHTML(h){
 const d=document.createElement("div");
 d.innerHTML=h;
 return d.textContent||"";
}

async function buscarRSS(url){
 try{
  const r=await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`);
  const x=await r.text();
  const xml=new DOMParser().parseFromString(x,"text/xml");
  return [...xml.querySelectorAll("item")].map(i=>({
    title:i.querySelector("title")?.textContent||"",
    link:i.querySelector("link")?.textContent||"",
    desc:i.querySelector("description")?.textContent||""
  }));
 }catch{return []}
}

function pertenceTema(a,p){
 const t=(a.title+a.desc).toLowerCase();
 return p.some(x=>t.includes(x));
}

async function atualizarSecao(id,feeds,filtro=null){
 const c=document.getElementById(id);
 c.innerHTML="<em>Carregando...</em>";

 const dados=(await Promise.all(feeds.map(f=>buscarRSS(f)))).flat();
 let noticias=dados;

 if(filtro) noticias=noticias.filter(n=>pertenceTema(n,filtro));
 noticias=noticias.slice(0,8);

 c.innerHTML="";
 noticias.forEach(n=>{
  const d=document.createElement("div");
  d.className="news-item";
  const u=getUrgencia(n);
  if(u) d.classList.add(u);
  d.innerHTML=`
   <div class="news-title"><a href="${n.link}" target="_blank">${n.title}</a></div>
   <div class="news-desc">${stripHTML(n.desc)}</div>`;
  c.appendChild(d);
 });

 if(!noticias.length) c.innerHTML="Nenhuma notÃ­cia relevante.";
}

// ========= ATUALIZAÃ‡ÃƒO =========
async function atualizarTudo(){
 atualizarSecao("mercado",feedsMercado);
 atualizarSecao("breaking",feedsBreaking);

 for(const t in temas){
   atualizarSecao(t,feedsMercado,temas[t]);
 }
}

atualizarTudo();
setInterval(atualizarTudo,60000);
</script>

</body>
</html>
