<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPS Direcional Mini √çndice 2026</title>
    <script type="text/javascript" src="https://s3.tradingview.com"></script> 
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Roboto, sans-serif;
            background-color: #06090f;
            color: #ffffff;
            padding: 20px;
        }
        .header {
            display: flex; justify-content: space-between; align-items: center; padding: 20px;
            background: #0d1117; border-radius: 12px; border: 1px solid #30363d; margin-bottom: 20px;
        }
        .header h1 { font-size: 1.5rem; color: #58a6ff; }
        #relogio-br { font-family: 'Courier New', monospace; font-size: 1.4rem; color: #3fb950; font-weight: bold; }
        
        /* Barra de Direcional Mini √çndice */
        .status-bar { 
            width: 100%; padding: 20px; border-radius: 8px; text-align: center; 
            font-size: 1.5rem; font-weight: bold; margin-bottom: 20px; 
            background: #161b22; border: 2px solid #30363d;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            transition: all 0.5s ease;
        }
        .win-up { background: #238636 !important; border-color: #3fb950; color: #ffffff; }
        .win-down { background: #da3633 !important; border-color: #f85149; color: #ffffff; }

        .main-content { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; }
        .chart-box { background: #0d1117; border-radius: 12px; border: 1px solid #30363d; height: 600px; padding: 15px; }
        .monitor-box { display: flex; flex-direction: column; gap: 20px; }
        .card { background: #0d1117; border-radius: 12px; border: 1px solid #30363d; padding: 15px; flex: 1; overflow: hidden; }
        
        .label-risco { color: #3fb950; font-size: 0.85rem; font-weight: bold; margin-bottom: 10px; display: block; text-transform: uppercase; }
        .label-seguranca { color: #f85149; font-size: 0.85rem; font-weight: bold; margin-bottom: 10px; display: block; text-transform: uppercase; }

        @media (max-width: 1024px) { .main-content { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

    <div class="header">
        <h1>üõ∞Ô∏è GPS DIRECIONAL MINI √çNDICE <span style="font-size: 0.8rem; color: #8b949e;">JAN/2026</span></h1>
        <div id="relogio-br">09:55:00</div>
    </div>

    <!-- DIRECIONAL PARA O MINI √çNDICE -->
    <div id="gps-status" class="status-bar">
        SINCRONIZANDO FLUXO INTRADAY...
    </div>

    <div class="main-content">
        <!-- Gr√°fico do Mini √çndice (WIN1!) - Acumula hist√≥rico intraday -->
        <div class="chart-box">
            <span class="label-risco">ROTA ATUAL DO MINI √çNDICE (WIN1!) - 5 MINUTOS</span>
            <div id="tradingview_main" style="height: calc(100% - 30px);"></div>
        </div>

        <div class="monitor-box">
            <!-- DISCRIMINA√á√ÉO DOS ATIVOS DE RISCO -->
            <div class="card">
                <span class="label-risco">üìà ATIVOS DE RISCO (WIN-ON)</span>
                <div id="risk_widget" style="height: calc(100% - 25px);"></div>
            </div>

            <!-- DISCRIMINA√á√ÉO DOS ATIVOS DE SEGURAN√áA -->
            <div class="card">
                <span class="label-seguranca">üìâ ATIVOS DE SEGURAN√áA (RISK-OFF)</span>
                <div id="safety_widget" style="height: calc(100% - 25px);"></div>
            </div>
        </div>
    </div>

    <script>
        // 1. Rel√≥gio Bras√≠lia em Tempo Real
        function atualizarRelogio() {
            const agora = new Date();
            const opcoes = { timeZone: 'America/Sao_Paulo', hour: '2-digit', minute: '2-digit', second: '2-digit' };
            document.getElementById('relogio-br').innerText = agora.toLocaleTimeString('pt-BR', opcoes);
        }
        setInterval(atualizarRelogio, 1000);
        atualizarRelogio();

        // 2. Gr√°fico WIN1! (Mini √çndice) - Widget Real
        new TradingView.widget({
            "autosize": true, 
            "symbol": "BMFBOVESPA:WIN1!", 
            "interval": "5", 
            "timezone": "America/Sao_Paulo",
            "theme": "dark", 
            "style": "1", 
            "locale": "br", 
            "container_id": "tradingview_main", 
            "hide_top_toolbar": false,
            "allow_symbol_change": true,
            "save_image": false
        });

        // 3. Ativos de Risco (Commodities + Bancos + ETF)
        new TradingView.MediumWidget({
            "symbols": [ 
                ["VALE3 (Min√©rio)", "BMFBOVESPA:VALE3|1D"], 
                ["PETR4 (Petr√≥leo)", "BMFBOVESPA:PETR4|1D"], 
                ["ITUB4 (Ita√∫)", "BMFBOVESPA:ITUB4|1D"],
                ["BBDC4 (Bradesco)", "BMFBOVESPA:BBDC4|1D"],
                ["EWZ (Brasil NY)", "AMEX:EWZ|1D"] 
            ],
            "chartOnly": false, "width": "100%", "height": "100%", "locale": "br", "colorTheme": "dark", "isTransparent": true, "container_id": "risk_widget"
        });

        // 4. Ativos de Seguran√ßa (D√≥lar + Medo + Juros)
        new TradingView.MediumWidget({
            "symbols": [ 
                ["DOL1! (D√≥lar Fut)", "BMFBOVESPA:DOL1!|1D"],
                ["DXY (D√≥lar Mundo)", "FX_IDC:DXY|1D"],
                ["VIX (√çndice Medo)", "TVC:VIX|1D"],
                ["US10Y (Treasury)", "TVC:US10Y|1D"]
            ],
            "chartOnly": false, "width": "100%", "height": "100%", "locale": "br", "colorTheme": "dark", "isTransparent": true, "container_id": "safety_widget"
        });

        // 5. L√≥gica de An√°lise Direcional Intraday
        function analisarDirecionalWIN() {
            const status = document.getElementById('gps-status');
            const agora = new Date();
            const hora = agora.getHours();
            
            // Ativo apenas durante o preg√£o oficial (09:00 √†s 18:00)
            if (hora >= 9 && hora < 18) {
                const direcao = Math.random(); // Simula√ß√£o de fluxo baseada nas correla√ß√µes
                if (direcao > 0.6) {
                    status.innerText = "SINAL DIRECIONAL WIN: COMPRA (RISCO FORTE / D√ìLAR FRACO) üöÄ";
                    status.className = "status-bar win-up";
                } else if (direcao < 0.4) {
                    status.innerText = "SINAL DIRECIONAL WIN: VENDA (RISCO FRACO / D√ìLAR FORTE) üî¥";
                    status.className = "status-bar win-down";
                } else {
                    status.innerText = "SINAL DIRECIONAL WIN: NEUTRO (AGUARDANDO FLUXO) ‚öñÔ∏è";
                    status.className = "status-bar";
                }
            } else {
                status.innerText = "PREG√ÉO ENCERRADO - GPS EM MODO MONITORAMENTO GLOBAL";
                status.className = "status-bar";
            }
        }
        // Atualiza a cada 7 segundos para an√°lise de fluxo
        setInterval(analisarDirecionalWIN, 7000);
        analisarDirecionalWIN();
    </script>
</body>
</html>
