<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Painel Macro ‚Äì Risco x Seguran√ßa</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:#f3f4f6;
}

/* HEADER */
header{
  background:#111827;
  color:#fff;
  padding:12px;
  text-align:center;
  font-size:20px;
  font-weight:bold;
}

#relogio{
  background:#1f2937;
  color:#fff;
  text-align:center;
  padding:8px;
  font-size:16px;
  font-weight:bold;
}

/* LAYOUT */
#conteudo{
  display:flex;
  justify-content:center;
  align-items:flex-start;
  gap:20px;
  padding:20px;
}

/* TABELA CENTRAL */
#tabela-central{
  background:#fff;
  border-radius:8px;
  box-shadow:0 2px 8px rgba(0,0,0,.15);
  padding:15px;
  width:320px;
}

#tabela-central h3{
  text-align:center;
  margin-top:0;
  background:#1f2937;
  color:#fff;
  padding:8px;
  border-radius:6px;
}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}

th{
  background:#1f2937;
  color:#fff;
  padding:8px;
}

td{
  padding:8px;
  text-align:center;
  font-weight:bold;
  border-bottom:1px solid #e5e7eb;
}

.alta{background:#dcfce7;color:#065f46;}
.baixa{background:#fee2e2;color:#7f1d1d;}
.neutra{background:#fef9c3;color:#78350f;}

/* GR√ÅFICO */
#grafico-box{
  background:#fff;
  border-radius:8px;
  box-shadow:0 2px 8px rgba(0,0,0,.15);
  padding:15px;
  width:700px;
}

/* NEWS */
#news-area{
  width:360px;
  display:flex;
  flex-direction:column;
  gap:15px;
}

.news-box{
  background:#111827;
  color:white;
  border-radius:8px;
  box-shadow:0 4px 8px rgba(0,0,0,0.3);
  overflow:hidden;
}

.news-header{
  background:#1f2937;
  padding:8px;
  text-align:center;
  font-weight:bold;
}

.news-list{
  max-height:260px;
  overflow-y:auto;
  font-size:13px;
}

.news-item{
  padding:8px;
  border-bottom:1px solid #374151;
}

.news-item a{
  color:#93c5fd;
  text-decoration:none;
}

/* ALERTA */
.alerta-box{
  background:#ffffff;
  border-left:5px solid #c00000;
  box-shadow:0 2px 8px rgba(0,0,0,0.2);
  font-size:12px;
}

.alerta-header{
  background:#c00000;
  color:white;
  font-weight:bold;
  padding:6px;
  text-align:center;
}

.alerta-conteudo{
  padding:8px;
}
</style>
</head>

<body>

<header>üìä Painel Macro ‚Äì Risco x Seguran√ßa</header>
<div id="relogio"></div>

<div id="conteudo">

  <!-- TABELA -->
  <div id="tabela-central">
    <h3>Vis√£o Macro</h3>
    <table>
      <tr><th>Ativo</th><th>Status</th></tr>
      <tr><td>S&P 500</td><td id="sp" class="neutra">NEUTRO</td></tr>
      <tr><td>VIX</td><td id="vix" class="neutra">NEUTRO</td></tr>
      <tr><td>DXY</td><td id="dxy" class="neutra">NEUTRO</td></tr>
      <tr><td>DI Futuro</td><td id="di" class="neutra">NEUTRO</td></tr>
    </table>
  </div>

  <!-- GR√ÅFICO -->
  <div id="grafico-box">
    <canvas id="grafico"></canvas>
  </div>

  <!-- NEWS -->
  <div id="news-area">

    <div class="news-box">
      <div class="news-header">üö® BREAKING NEWS</div>
      <div class="news-list" id="breakingNews">
        <div class="news-item">Aguardando not√≠cias...</div>
      </div>
    </div>

    <div class="alerta-box">
      <div class="alerta-header">‚ö†Ô∏è ALERTA DE MERCADO</div>
      <div class="alerta-conteudo" id="alertaMercado">
        Aguardando alerta...
      </div>
    </div>

  </div>

</div>

<script>
/* REL√ìGIO */
setInterval(()=>{
  document.getElementById("relogio").innerText =
    "‚è∞ Hor√°rio de Bras√≠lia: " + new Date().toLocaleTimeString("pt-BR");
},1000);

/* GR√ÅFICO */
let labels=[], risco=[], seguro=[];
let vr=0, vs=0;

const chart=new Chart(document.getElementById("grafico"),{
  type:"line",
  data:{
    labels:[],
    datasets:[
      {label:"Ativos de Risco",data:[],borderColor:"#16a34a",fill:true},
      {label:"Ativos de Seguran√ßa",data:[],borderColor:"#dc2626",fill:true}
    ]
  }
});

function atualizarGrafico(){
  const agora=new Date();
  vr+=(Math.random()-0.5)*0.4;
  vs+=(Math.random()-0.5)*0.3;

  labels.push(agora.toLocaleTimeString("pt-BR"));
  risco.push(vr);
  seguro.push(vs);

  chart.data.labels=labels;
  chart.data.datasets[0].data=risco;
  chart.data.datasets[1].data=seguro;
  chart.update();

  atualizarTabela();
}
setInterval(atualizarGrafico,60000);
atualizarGrafico();

/* TABELA */
function status(el,val){
  el.className=val>0.2?"alta":val<-0.2?"baixa":"neutra";
  el.innerText=val>0.2?"ALTA":val<-0.2?"BAIXA":"NEUTRO";
}
function atualizarTabela(){
  status(sp,vr); status(vix,-vr); status(dxy,vs); status(di,vs);
}

/* BREAKING NEWS */
async function buscarNoticias(){
  const rss="https://news.google.com/rss/search?q=market+fed+inflation+stocks";
  const res=await fetch("https://api.allorigins.win/raw?url="+encodeURIComponent(rss));
  const xml=new DOMParser().parseFromString(await res.text(),"text/xml");
  const items=xml.querySelectorAll("item");
  const box=document.getElementById("breakingNews");
  box.innerHTML="";
  items.forEach((i,idx)=>{
    if(idx>5)return;
    box.innerHTML+=`<div class="news-item">
      <strong>${i.querySelector("title").textContent}</strong><br>
      <a href="${i.querySelector("link").textContent}" target="_blank">Ler</a>
    </div>`;
  });
}
setInterval(buscarNoticias,30000);
buscarNoticias();

/* ALERTA */
async function alertaMercado(){
  const rss="https://news.google.com/rss/search?q=crise+mercado+juros";
  const res=await fetch("https://api.allorigins.win/raw?url="+encodeURIComponent(rss));
  const xml=new DOMParser().parseFromString(await res.text(),"text/xml");
  const item=xml.querySelector("item");
  if(item){
    document.getElementById("alertaMercado").innerHTML=
      `<strong>${item.querySelector("title").textContent}</strong>`;
  }
}
setInterval(alertaMercado,60000);
alertaMercado();
</script>

</body>
</html>
