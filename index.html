<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>GPS Macro Sem API</title>
    <script src="https://cdn.jsdelivr.net"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: #020617; color: #f8fafc; padding: 20px; }
        .container { max-width: 1100px; margin: 0 auto; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #1e293b; padding-bottom: 10px; }
        #relogio { font-family: monospace; font-size: 1.4rem; color: #60a5fa; }
        
        .macro-table { width: 100%; border-collapse: collapse; background: #0f172a; border-radius: 12px; margin-bottom: 20px; border: 1px solid #1e293b; overflow: hidden; }
        .macro-table th { text-align: left; padding: 12px; color: #64748b; font-size: 0.8rem; background: #1e293b; }
        .macro-table td { padding: 12px; border-top: 1px solid #1e293b; font-size: 0.9rem; }
        .up { color: #10b981; font-weight: bold; }
        .down { color: #ef4444; font-weight: bold; }
        .neutral { color: #d4d4d4; }

        .cards { display: flex; gap: 20px; margin-bottom: 20px; }
        .card { flex: 1; background: #0f172a; padding: 15px; border-radius: 12px; border: 1px solid #1e293b; text-align: center; }
        .card-val { font-size: 1.8rem; font-weight: bold; margin-top: 5px; }

        .chart-box { background: #0f172a; border-radius: 12px; padding: 20px; border: 1px solid #1e293b; height: 450px; position: relative; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>投 GPS GLOBAL (Sem API)</h1>
        <div id="relogio">00:00:00</div>
    </div>

    <!-- Tabela Macro Simulaﾃｧﾃ｣o 2026 -->
    <table class="macro-table">
        <thead>
            <tr><th>PILAR</th><th>REFERﾃ劾CIA</th><th>VALOR ATUAL</th><th>VARIAﾃﾃグ</th><th>IMPACTO BR</th></tr>
        </thead>
        <tbody>
            <tr><td>Petrﾃｳleo</td><td>Brent Oil</td><td id="cotacaoBrent">--</td><td id="variacaoBrent">--</td><td id="impactoBrent" class="neutral">Neutro</td></tr>
            <tr><td>Minﾃｩrio</td><td>Iron Ore</td><td id="cotacaoMinio">--</td><td id="variacaoMinio">--</td><td id="impactoMinio" class="neutral">Neutro</td></tr>
            <tr><td>Dﾃｳlar</td><td>DXY Index</td><td id="cotacaoDXY">--</td><td id="variacaoDXY">--</td><td id="impactoDXY" class="neutral">Neutro</td></tr>
        </tbody>
    </table>

    <!-- Cards de Sentimento -->
    <div class="cards">
        <div class="card">
            <h3>SENTIMENTO</h3>
            <div id="statusSentimento" class="neutral card-val">MISTO</div>
        </div>
        <div class="card">
            <h3>FASE ATUAL</h3>
            <div id="faseMercado" class="neutral card-val">--</div>
        </div>
    </div>

    <div class="chart-box">
        <canvas id="meuGrafico"></canvas>
    </div>
</div>

<script>
    let grafico;

    // 1. Gerar Labels (01:00 ﾃs 00:00)
    const labels24h = Array.from({length: 24}, (_, i) => {
        let h = (i + 1) === 24 ? "00" : (i + 1 < 10 ? "0" + (i + 1) : i + 1);
        return h + ":00";
    });

    // 2. FUNﾃﾃグ DE SIMULAﾃﾃグ DE DADOS SEM API
    function simularDadosAtuais() {
        const agora = new Date();
        const horaAtual = agora.getHours();
        const minutoAtual = agora.getMinutes();
        
        // Simulaﾃｧﾃ｣o de cotaﾃｧﾃｵes base 2026 com leve variaﾃｧﾃ｣o randﾃｴmica
        const brent = 64.06 + (Math.random() * 0.5 - 0.25);
        const minio = 107.15 + (Math.random() * 1.0 - 0.5);
        const dxy   = 103.45 + (Math.random() * 0.2 - 0.1);
        
        // Simulaﾃｧﾃ｣o de Variaﾃｧﾃ｣o (Para fins visuais)
        const variacaoB = (Math.random() * 1.5 - 0.75).toFixed(2);
        const variacaoM = (Math.random() * 2.0 - 1.0).toFixed(2);
        const variacaoD = (Math.random() * 0.5 - 0.25).toFixed(2);

        // Atualizar Tabela Visual
        document.getElementById('cotacaoBrent').innerText = `$${brent.toFixed(2)}`;
        document.getElementById('variacaoBrent').innerText = `${variacaoB}%`;
        document.getElementById('variacaoBrent').className = variacaoB >= 0 ? 'up' : 'down';
        document.getElementById('cotacaoMinio').innerText = `$${minio.toFixed(2)}`;
        document.getElementById('variacaoMinio').innerText = `${variacaoM}%`;
        document.getElementById('variacaoMinio').className = variacaoM >= 0 ? 'up' : 'down';
        document.getElementById('cotacaoDXY').innerText = `${dxy.toFixed(2)}`;
        document.getElementById('variacaoDXY').innerText = `${variacaoD}%`;
        document.getElementById('variacaoDXY').className = variacaoD >= 0 ? 'up' : 'down';

        // Lﾃｳgica de Sentimento Simulado (baseado na hora do dia)
        if (horaAtual >= 1 && horaAtual < 9) {
             document.getElementById('statusSentimento').innerText = "RISK-OFF (Cautela ﾃ《ia)";
             document.getElementById('statusSentimento').className = 'down';
        } else if (horaAtual >= 9 && horaAtual < 18) {
            document.getElementById('statusSentimento').innerText = "RISK-ON (Pregﾃ｣o B3/EUA)";
            document.getElementById('statusSentimento').className = 'up';
        } else {
            document.getElementById('statusSentimento').innerText = "MISTO (After-Market)";
            document.getElementById('statusSentimento').className = 'neutral';
        }
    }

    // 3. Gerar Dados Histﾃｳricos para o Grﾃ｡fico (para nﾃ｣o ficar vazio)
    function gerarHistoricoGrafico() {
         const agora = new Date();
         const horaAtual = agora.getHours();
         const dadosRisco = [];
         const dadosSeg = [];

         for (let i = 1; i <= 24; i++) {
             // Apenas preenche atﾃｩ a hora atual para simular histﾃｳrico acumulado
             if (i <= horaAtual || (horaAtual === 0 && i <= 24)) {
                 dadosRisco.push((Math.random() * 0.8 - 0.4).toFixed(2));
                 dadosSeg.push((Math.random() * 0.5 - 0.25).toFixed(2));
             } else {
                 dadosRisco.push(null);
                 dadosSeg.push(null);
             }
         }
         return { dadosRisco, dadosSeg };
    }


    // 4. Inicializar Grﾃ｡fico
    function renderizarGrafico() {
        const { dadosRisco, dadosSeg } = gerarHistoricoGrafico();
        const ctx = document.getElementById('meuGrafico').getContext('2d');
        
        if (grafico) grafico.destroy();

        grafico = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels24h,
                datasets: [
                    { label: 'Risco (Bolsas)', data: dadosRisco, borderColor: '#10b981', backgroundColor: 'rgba(16, 185, 129, 0.1)', fill: true, tension: 0.4 },
                    { label: 'Seguranﾃｧa (Dﾃｳlar)', data: dadosSeg, borderColor: '#ef4444', backgroundColor: 'rgba(239, 68, 68, 0.1)', fill: true, tension: 0.4 }
                ]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                scales: {
                    x: { grid: { color: '#1e293b' }, ticks: { color: '#94a3b8' } },
                    y: { grid: { color: '#1e293b' }, ticks: { color: '#94a3b8' } }
                },
                plugins: { legend: { labels: { color: '#f8fafc' } } }
            }
        });
    }

    // 5. Loop Principal (Relﾃｳgio e Simulaﾃｧﾃ｣o)
    function loopPrincipal() {
        const agora = new Date();
        document.getElementById('relogio').innerText = agora.toLocaleTimeString('pt-BR');
        
        const h = agora.getHours();
        let fase = "";
        if (h >= 1 && h < 9) fase = "訣 ﾃ《ia & Europa";
        else if (h >= 9 && h < 18) fase = "ｧｷ B3 & ｺｸ EUA";
        else fase = "嫌 After-Market/Fechado";
        document.getElementById('faseMercado').innerText = fase;

        // Atualiza os cards e tabela com novos nﾃｺmeros a cada 30 segundos
        if (agora.getSeconds() % 30 === 0) { 
            simularDadosAtuais();
            renderizarGrafico(); // Atualiza o ponto atual do grﾃ｡fico
        }
    }

    window.onload = () => {
        simularDadosAtuais();
        renderizarGrafico();
        setInterval(loopPrincipal, 1000);
        loopPrincipal();
    };
</script>

</body>
</html>
