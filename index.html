<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Ativos de Risco x Seguros - Tempo Real</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
        }
        #grafico {
            width: 100%;
            height: 500px;
        }
    </style>
</head>
<body>

<h2>Ativos de Risco x Seguros - Tempo Real</h2>
<div id="grafico"></div>

<script>
    // Valores iniciais
    var valor_risco = 100;
    var valor_seguro = 100;

    // Função de simulação
    function atualizarValores(valor) {
        return Math.max(0, valor + (Math.random() - 0.5) * 2);
    }

    // Criar gráfico com ponto inicial
    var data = [
        {
            x: [new Date().toLocaleTimeString()],
            y: [valor_risco],
            type: 'scatter',
            mode: 'lines+markers',
            name: 'Ativos de Risco',
            line: { color: 'red' }
        },
        {
            x: [new Date().toLocaleTimeString()],
            y: [valor_seguro],
            type: 'scatter',
            mode: 'lines+markers',
            name: 'Ativos Seguros',
            line: { color: 'green' }
        }
    ];

    var layout = {
        title: 'Ativos de Risco vs Seguros - Tempo Real',
        xaxis: { title: 'Hora' },
        yaxis: { title: 'Valor' },
        autosize: true,
        margin: { t: 50, r: 30, l: 50, b: 50 }
    };

    Plotly.newPlot('grafico', data, layout, { responsive: true });

    // Atualização a cada 1 minuto
    setInterval(function () {
        var hora = new Date().toLocaleTimeString();

        valor_risco = atualizarValores(valor_risco);
        valor_seguro = atualizarValores(valor_seguro);

        Plotly.extendTraces('grafico', {
            x: [[hora], [hora]],
            y: [[valor_risco], [valor_seguro]]
        }, [0, 1], 60); // mantém últimos 60 pontos
    }, 60000);

    // Ajustar ao minimizar / redimensionar
    window.addEventListener('resize', function () {
        Plotly.Plots.resize('grafico');
    });
</script>

</body>
</html>
