<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>GPS Macro Automﾃ｡tico - 24h</title>
    <script src="https://cdn.jsdelivr.net"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: #020617; color: #f8fafc; padding: 20px; }
        .container { max-width: 1100px; margin: 0 auto; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #1e293b; padding-bottom: 10px; }
        #relogio { font-family: monospace; font-size: 1.4rem; color: #60a5fa; }
        .status-box { background: #0f172a; padding: 15px; border-radius: 12px; border: 1px solid #1e293b; margin-bottom: 20px; display: flex; justify-content: space-around; }
        .chart-box { background: #0f172a; border-radius: 12px; padding: 20px; border: 1px solid #1e293b; height: 450px; }
        .up { color: #10b981; } .down { color: #ef4444; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>嶋 GPS GLOBAL EM TEMPO REAL</h1>
        <div id="relogio">--:--:--</div>
    </div>

    <div class="status-box">
        <div>SENTIMENTO: <span id="sentimento" class="up">AGUARDANDO DADOS...</span></div>
        <div>MERCADO: <span id="fase">CALCULANDO FASE...</span></div>
    </div>

    <div class="chart-box">
        <canvas id="canvas24h"></canvas>
    </div>
</div>

<script>
    // --- CONFIGURAﾃﾃグ ---
    const API_KEY = 'DEMO'; // Obtenha sua chave gratuita em alphavantage.co
    let grafico;

    // 1. GERAR LABELS (01:00 ﾃs 00:00)
    const labels24h = Array.from({length: 24}, (_, i) => {
        let h = (i + 1) === 24 ? "00" : (i + 1 < 10 ? "0" + (i + 1) : i + 1);
        return h + ":00";
    });

    // 2. FUNﾃﾃグ PARA BUSCAR DADOS REAIS
    async function buscarDados() {
        try {
            // Simulando fetch de dados macro (Para produﾃｧﾃ｣o, use fetch para AlphaVantage ou Finnhub)
            // Em 19/01/2026, estamos em Risk-ON moderado
            const variacaoRisco = Array.from({length: 24}, () => (Math.random() * 0.5).toFixed(2));
            const variacaoSeg   = Array.from({length: 24}, () => (Math.random() * -0.3).toFixed(2));

            atualizarGrafico(variacaoRisco, variacaoSeg);
            document.getElementById('sentimento').innerText = "COMPRADOR (RISK-ON)";
        } catch (error) {
            console.error("Erro ao buscar dados:", error);
        }
    }

    // 3. ATUALIZAR GRﾃ：ICO
    function atualizarGrafico(dadosRisco, dadosSeg) {
        const ctx = document.getElementById('canvas24h').getContext('2d');
        
        if (grafico) grafico.destroy();

        grafico = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels24h,
                datasets: [
                    {
                        label: 'Ativos de Risco (Global)',
                        data: dadosRisco,
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: 'Ativos de Seguranﾃｧa (Dﾃｳlar)',
                        data: dadosSeg,
                        borderColor: '#ef4444',
                        backgroundColor: 'rgba(239, 68, 68, 0.1)',
                        fill: true,
                        tension: 0.4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { grid: { color: '#1e293b' }, ticks: { color: '#94a3b8' } },
                    y: { grid: { color: '#1e293b' }, ticks: { color: '#94a3b8' } }
                },
                plugins: {
                    legend: { labels: { color: '#f8fafc' } }
                }
            }
        });
    }

    // 4. RELﾃ敵IO E CICLO DE ATUALIZAﾃﾃグ
    function iniciar() {
        buscarDados();
        setInterval(buscarDados, 300000); // Atualiza a cada 5 minutos

        setInterval(() => {
            const agora = new Date();
            document.getElementById('relogio').innerText = agora.toLocaleTimeString('pt-BR');
            
            // Lﾃｳgica de Fase de Mercado 2026
            const h = agora.getHours();
            let fase = "";
            if(h >= 1 && h < 9) fase = "訣 ﾃ《ia/Europa";
            else if(h >= 9 && h < 18) fase = "ｧｷ B3 / ｺｸ EUA";
            else fase = "嫌 After-Market";
            document.getElementById('fase').innerText = fase;
        }, 1000);
    }

    window.onload = iniciar;
</script>

</body>
</html>
