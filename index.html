<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Terminal Macro Laatus - Risco vs Segurança</title>
    <style>
        body { font-family: 'Trebuchet MS', sans-serif; background-color: #06090f; color: #ffffff; margin: 0; padding: 15px; }
        .grid-layout { display: grid; grid-template-columns: 300px 1fr 1fr; gap: 15px; height: 95vh; }
        .sidebar { background: #131722; border-radius: 8px; padding: 10px; border: 1px solid #2a2e39; display: flex; flex-direction: column; }
        .main-charts { display: flex; flex-direction: column; gap: 15px; }
        .chart-box { background: #131722; border-radius: 8px; padding: 10px; border: 1px solid #2a2e39; flex: 1; }
        h3 { font-size: 0.9rem; margin-bottom: 10px; color: #d1d4dc; text-transform: uppercase; border-bottom: 1px solid #2a2e39; padding-bottom: 5px; }
        .label-risk { color: #2962ff; }
        .label-safe { color: #ff9800; }
        .label-market { color: #00bcd4; }
        .status-header { grid-column: 1 / span 3; background: #131722; padding: 10px; border-radius: 8px; text-align: center; font-weight: bold; border-bottom: 2px solid #2962ff; margin-bottom: 10px; }
    </style>
</head>
<body>

<div class="status-header" id="market-status">
    MONITOR DE FLUXO GLOBAL | 00:00 ÀS 19:00 | <span id="clock">00:00:00</span>
</div>

<div class="grid-layout">
    <!-- TABELA DE COTAÇÕES (SIDEBAR) -->
    <div class="sidebar">
        <h3 class="label-market">Cotações Chave</h3>
        <!-- Widget de Lista de Cotações do TradingView -->
        <div class="tradingview-widget-container">
            <div class="tradingview-widget-container__widget"></div>
            <script type="text/javascript" src="https://s3.tradingview.com" async>
            {
              "colorTheme": "dark",
              "dateRange": "12M",
              "showChart": false,
              "locale": "br",
              "width": "100%",
              "height": "100%",
              "largeChartUrl": "",
              "isTransparent": true,
              "showSymbolLogo": true,
              "showFloatingTooltip": false,
              "tabs": [
                {
                  "title": "Macro / Commo",
                  "symbols": [
                    { "s": "TVC:DXY", "d": "Dólar Index (DXY)" },
                    { "s": "TVC:VIX", "d": "VIX (Índice do Medo)" },
                    { "s": "TVC:UKOIL", "d": "Brent Crude Oil" },
                    { "s": "TVC:USOIL", "d": "WTI Crude Oil" },
                    { "s": "ECONOMICS:CNIRONORE", "d": "Minério de Ferro" }
                  ]
                }
              ]
            }
            </script>
        </div>
    </div>

    <!-- GRÁFICO ATIVOS DE RISCO -->
    <div class="main-charts">
        <div class="chart-box">
            <h3 class="label-risk">Ativos de Risco (S&P 500 Futuro)</h3>
            <div id="chart_risk" style="height: calc(100% - 30px);"></div>
        </div>
    </div>

    <!-- GRÁFICO ATIVOS DE SEGURANÇA -->
    <div class="main-charts">
        <div class="chart-box">
            <h3 class="label-safe">Ativos de Segurança (Ouro Spot)</h3>
            <div id="chart_safe" style="height: calc(100% - 30px);"></div>
        </div>
    </div>
</div>

<script type="text/javascript" src="https://s3.tradingview.com"></script>
<script type="text/javascript">
    // Gráfico de Risco
    new TradingView.widget({
        "autosize": true,
        "symbol": "CME_MINI:ES1!",
        "interval": "5",
        "timezone": "America/Sao_Paulo",
        "theme": "dark",
        "style": "1",
        "locale": "br",
        "container_id": "chart_risk",
        "enable_publishing": false,
        "hide_top_toolbar": false,
        "save_image": false
    });

    // Gráfico de Segurança
    new TradingView.widget({
        "autosize": true,
        "symbol": "OANDA:XAUUSD",
        "interval": "5",
        "timezone": "America/Sao_Paulo",
        "theme": "dark",
        "style": "1",
        "locale": "br",
        "container_id": "chart_safe",
        "enable_publishing": false,
        "hide_top_toolbar": false,
        "save_image": false
    });

    // Relógio e Lógica de Horário (00:00 às 19:00)
    function updateClock() {
        const now = new Date();
        document.getElementById('clock').innerText = now.toLocaleTimeString('pt-BR');
        const h = now.getHours();
        const header = document.getElementById('market-status');
        
        if (h >= 0 && h < 19) {
            header.style.borderBottomColor = "#238636"; // Verde se estiver no horário
        } else {
            header.style.borderBottomColor = "#da3633"; // Vermelho se fora
        }
    }
    setInterval(updateClock, 1000);
</script>

</body>
</html>
